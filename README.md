# Instalador de Docker + Docker Compose para Debian 13 (Trixie)

Este script automatiza la instalaci√≥n completa de Docker Engine y Docker Compose en **Debian 13 (Trixie)**, incluyendo utilidades de red y configuraci√≥n de permisos de usuario.

## üìã Caracter√≠sticas principales

- ‚úÖ Instalaci√≥n autom√°tica de Docker Engine y Docker Compose
- ‚úÖ Configuraci√≥n del grupo `sudo` y permisos de usuario
- ‚úÖ Instalaci√≥n de herramientas de red esenciales (`net-tools`, `iproute2`, `iputils-ping`, `dnsutils`)
- ‚úÖ Eliminaci√≥n autom√°tica de versiones anteriores de Docker
- ‚úÖ Configuraci√≥n de repositorios oficiales de Docker
- ‚úÖ Verificaci√≥n completa de la instalaci√≥n
- ‚úÖ Prueba autom√°tica con contenedor `hello-world`

## üöÄ Instalaci√≥n r√°pida

### üéØ Opci√≥n RECOMENDADA para Debian 13 (Trixie) - Script corregido

```bash
# Descargar la versi√≥n corregida espec√≠fica para Debian 13
wget https://raw.githubusercontent.com/tomasecastro/Docker-Debian/main/install_docker_debian13_fixed.sh

# Otorgar permisos de ejecuci√≥n
chmod +x install_docker_debian13_fixed.sh

# Ejecutar con privilegios de administrador
sudo ./install_docker_debian13_fixed.sh
```

### Opci√≥n 1: Descargar con wget (versi√≥n original)

```bash
# Si curl no est√° disponible, usar wget (viene preinstalado en Debian)
wget https://raw.githubusercontent.com/tomasecastro/Docker-Debian/main/install_docker_debian13.sh

# Otorgar permisos de ejecuci√≥n
chmod +x install_docker_debian13.sh

# Ejecutar con privilegios de administrador
sudo ./install_docker_debian13.sh
```

### Opci√≥n 2: Descargar con curl (si est√° disponible)

```bash
# Descargar el script de instalaci√≥n
curl -O https://raw.githubusercontent.com/tomasecastro/Docker-Debian/main/install_docker_debian13.sh

# Otorgar permisos de ejecuci√≥n
chmod +x install_docker_debian13.sh

# Ejecutar con privilegios de administrador
sudo ./install_docker_debian13.sh
```

### Opci√≥n 3: Ejecutar directamente desde el repositorio

```bash
# Con wget (si curl no est√° disponible)
wget -qO- https://raw.githubusercontent.com/tomasecastro/Docker-Debian/main/install_docker_debian13.sh | sudo bash

# Con curl (si est√° disponible)
curl -s https://raw.githubusercontent.com/tomasecastro/Docker-Debian/main/install_docker_debian13.sh | sudo bash
```

### ‚ö†Ô∏è Si no tienes curl ni wget instalados

```bash
# Instalar herramientas necesarias primero
apt update && apt install -y curl wget gnupg2

# Luego usar cualquiera de las opciones anteriores
```

### üõ†Ô∏è Instalaci√≥n en sistemas m√≠nimos de Debian

Si tienes una instalaci√≥n muy b√°sica de Debian sin herramientas esenciales:

```bash
# 1. Instalar dependencias m√≠nimas
apt update
apt install -y curl wget gnupg2 lsb-release ca-certificates

# 2. Descargar y ejecutar el script mejorado
wget https://raw.githubusercontent.com/tomasecastro/Docker-Debian/main/install_docker_debian13.sh
chmod +x install_docker_debian13.sh
sudo ./install_docker_debian13.sh
```

## üì¶ Instalaci√≥n de Odoo 18 con Docker Compose

Una vez que Docker est√© instalado, puedes desplegar **Odoo 18** con un solo comando:

```bash
curl -s https://raw.githubusercontent.com/tomasecastro/odoo-18-docker-compose/master/run.sh | sudo bash -s odoo-one 10018 20018
```

**¬øQu√© hace este comando?**
- üì• Descarga e instala autom√°ticamente Odoo 18 con Docker Compose
- üè∑Ô∏è Configura el nombre de la instancia como `odoo-one`
- üåê Expone la aplicaci√≥n Odoo en el puerto `10018`
- üóÑÔ∏è Configura PostgreSQL en el puerto `20018`

## üõ†Ô∏è Componentes instalados

### Utilidades del sistema
- **`sudo`** - Gesti√≥n de permisos de administrador
- **`curl` y `wget`** - Herramientas para descargas desde internet
- **`gnupg` y `ca-certificates`** - Manejo de certificados y cifrado
- **`apt-transport-https`** - Transporte seguro para repositorios APT

### Herramientas de red
- **`net-tools`** - Comandos cl√°sicos de red (`ifconfig`, `netstat`, `arp`)
- **`iproute2`** - Herramientas modernas de red (`ip`, `ss`, `tc`)
- **`iputils-ping`** - Utilidad `ping` para pruebas de conectividad
- **`dnsutils`** - Herramientas DNS (`dig`, `nslookup`, `host`)

### Componentes de Docker
- **Docker Engine** - Motor principal de contenedores (√∫ltima versi√≥n estable)
- **Docker Compose Plugin** - Orquestaci√≥n de aplicaciones multi-contenedor
- **Docker Buildx Plugin** - Constructor avanzado de im√°genes
- **Containerd** - Runtime de contenedores de bajo nivel

## üìã Requisitos del sistema

- **Sistema operativo**: Debian 13 (Trixie)
- **Arquitecturas soportadas**: amd64, arm64, armhf
- **Permisos**: Acceso de usuario root o sudo configurado
- **Red**: Conexi√≥n activa a internet para descargar paquetes
- **Espacio en disco**: M√≠nimo 2GB libres para Docker y dependencias

### ‚ö†Ô∏è Nota importante para Debian 13 (Trixie)

Debian 13 introduce cambios significativos en el sistema de verificaci√≥n de paquetes que causan conflictos con repositorios externos de Docker:

#### üîß Problemas conocidos:
- **Sistema `sqv`**: Nuevo verificador de firmas OpenPGP incompatible con claves Docker
- **Repositorios externos**: Los repos oficiales de Docker no son totalmente compatibles con Trixie
- **Errores de keyring**: "Failed to parse keyring" es com√∫n con repos externos

#### ‚úÖ Soluciones implementadas:
- **Script corregido**: `install_docker_debian13_fixed.sh` evita repos externos problem√°ticos
- **Docker.io nativo**: Usa la versi√≥n de Docker incluida en los repositorios Debian
- **Compatibilidad total**: Funciona perfectamente sin modificar el sistema de paquetes

## üîß Instrucciones paso a paso

### 1. Preparaci√≥n del sistema
```bash
# Actualizar lista de paquetes
apt update

# Si necesitas instalar wget o curl primero
apt install -y wget curl

# Descargar el instalador (usando wget que viene preinstalado)
wget https://raw.githubusercontent.com/tomasecastro/Docker-Debian/main/install_docker_debian13.sh
```

### 2. Ejecuci√≥n del instalador
```bash
# Hacer el script ejecutable
chmod +x install_docker_debian13.sh

# Ejecutar la instalaci√≥n
sudo ./install_docker_debian13.sh
```

### 3. Aplicar cambios de grupo
```bash
# Cerrar sesi√≥n completamente
exit

# Volver a iniciar sesi√≥n para aplicar los grupos
# Esto es OBLIGATORIO para usar Docker sin sudo
```

## ‚úÖ Verificaci√≥n de la instalaci√≥n

Despu√©s de reiniciar sesi√≥n, ejecuta estas pruebas:

```bash
# 1. Verificar versiones instaladas
docker --version
docker compose version

# 2. Probar funcionamiento b√°sico
docker run hello-world

# 3. Confirmar que funciona sin sudo
docker ps

# 4. Verificar servicios activos
sudo systemctl status docker
```

## üê≥ Comandos esenciales de Docker

### Gesti√≥n de contenedores
```bash
# Listar contenedores en ejecuci√≥n
docker ps

# Listar todos los contenedores (incluso detenidos)
docker ps -a

# Detener un contenedor
docker stop <nombre_contenedor>

# Eliminar un contenedor
docker rm <nombre_contenedor>

# Ver logs de un contenedor
docker logs <nombre_contenedor>

# Acceder al terminal de un contenedor
docker exec -it <nombre_contenedor> bash
```

### Gesti√≥n de im√°genes
```bash
# Listar im√°genes descargadas
docker images

# Descargar una imagen
docker pull <nombre_imagen>

# Eliminar una imagen
docker rmi <nombre_imagen>

# Construir imagen desde Dockerfile
docker build -t mi_imagen .
```

### Mantenimiento del sistema
```bash
# Ver uso de espacio en disco
docker system df

# Limpiar recursos no utilizados
docker system prune

# Limpiar todo (¬°cuidado!)
docker system prune -a
```

## üîç Soluci√≥n de problemas comunes

### ‚ùå Error: "curl: command not found" o "wget: command not found"
```bash
# Instalar herramientas de descarga b√°sicas primero
apt update
apt install -y curl wget gnupg2

# Luego descargar el script
wget https://raw.githubusercontent.com/tomasecastro/Docker-Debian/main/install_docker_debian13.sh
```

### ‚ùå Error: "gpg: command not found" durante la instalaci√≥n
```bash
# El script actualizado ya maneja esto, pero si persiste:
apt update
apt install -y gnupg2 gnupg curl

# Volver a ejecutar el script
sudo ./install_docker_debian13.sh
```

### ‚ùå Error: "Failed to parse keyring" o problemas con la clave GPG
```bash
# Limpiar claves anteriores problem√°ticas
rm -f /etc/apt/keyrings/docker.gpg
rm -f /etc/apt/sources.list.d/docker.list

# Volver a ejecutar el script completo
sudo ./install_docker_debian13.sh
```

### ‚ùå Error: "Unable to locate package software-properties-common"
```bash
# Este paquete no existe en Debian 13, el script actualizado ya lo maneja
# Descargar la versi√≥n m√°s reciente del script:
wget https://raw.githubusercontent.com/tomasecastro/Docker-Debian/main/install_docker_debian13.sh
chmod +x install_docker_debian13.sh
sudo ./install_docker_debian13.sh
```

### ‚ùå Problemas con repositorios de Docker en Debian 13 (Trixie)
```bash
# SOLUCI√ìN RECOMENDADA: Usar el script corregido
wget https://raw.githubusercontent.com/tomasecastro/Docker-Debian/main/install_docker_debian13_fixed.sh
chmod +x install_docker_debian13_fixed.sh
sudo ./install_docker_debian13_fixed.sh
```

### ‚ùå Error: "Sub-process /usr/bin/sqv returned an error code (1)"
```bash
# Este es el error espec√≠fico de Debian 13 con repositorios externos
# SOLUCI√ìN: Usar docker.io desde repos oficiales Debian
apt update
apt install -y docker.io docker-compose docker-doc
systemctl enable docker
systemctl start docker

# Configurar usuario
sudo usermod -aG docker $USER
# Cerrar sesi√≥n y volver a entrar
```

### ‚ùå Error: "Failed to parse keyring /etc/apt/keyrings/docker.gpg"
```bash
# Limpiar completamente configuraciones problem√°ticas
sudo rm -f /etc/apt/keyrings/docker.gpg*
sudo rm -f /etc/apt/sources.list.d/docker.list*
sudo apt update

# Usar el script corregido
wget https://raw.githubusercontent.com/tomasecastro/Docker-Debian/main/install_docker_debian13_fixed.sh
chmod +x install_docker_debian13_fixed.sh
sudo ./install_docker_debian13_fixed.sh
```

### ‚ùå Error: "docker: command not found"
```bash
# Verificar si Docker est√° instalado
which docker

# Si no est√°, volver a ejecutar el instalador
sudo ./install_docker_debian13.sh
```

### ‚ùå Error: "permission denied while trying to connect to Docker"
```bash
# Verificar pertenencia al grupo docker
groups $USER

# Si no aparece 'docker', agregarlo manualmente
sudo usermod -aG docker $USER

# ¬°IMPORTANTE! Cerrar sesi√≥n y volver a entrar
exit
```

### ‚ùå Docker no inicia autom√°ticamente
```bash
# Habilitar el servicio Docker
sudo systemctl enable docker

# Iniciar el servicio Docker
sudo systemctl start docker

# Verificar el estado
sudo systemctl status docker
```

### ‚ùå Problemas de conectividad de red
```bash
# Verificar redes de Docker
docker network ls

# Reiniciar Docker completamente
sudo systemctl restart docker

# Verificar configuraci√≥n de red del sistema
sudo systemctl restart networking
```

### ‚ùå Espacio en disco insuficiente
```bash
# Ver uso de espacio de Docker
docker system df

# Limpiar contenedores detenidos
docker container prune

# Limpiar im√°genes no utilizadas
docker image prune

# Limpiar vol√∫menes hu√©rfanos
docker volume prune
```

## üìö Recursos y documentaci√≥n

### Documentaci√≥n oficial
- üìñ [Documentaci√≥n completa de Docker](https://docs.docker.com/)
- üêã [Referencia de Docker Compose](https://docs.docker.com/compose/)
- üêß [Gu√≠a de instalaci√≥n en Debian](https://docs.docker.com/engine/install/debian/)
- üìã [Mejores pr√°cticas de Docker](https://docs.docker.com/develop/dev-best-practices/)

### Recursos de Odoo
- üè¢ [Repositorio Odoo 18 Docker Compose](https://github.com/tomasecastro/odoo-18-docker-compose)
- üìò [Documentaci√≥n oficial de Odoo](https://www.odoo.com/documentation/18.0/)

### Tutoriales recomendados
- üéì [Tutorial b√°sico de Docker](https://docs.docker.com/get-started/)
- üöÄ [Gu√≠a de Docker Compose](https://docs.docker.com/compose/gettingstarted/)

## üìù Licencia y uso

Este proyecto se distribuye bajo la **Licencia MIT**. Puedes usar, modificar y distribuir libremente este c√≥digo. Consulta el archivo `LICENSE` para m√°s detalles.

## ü§ù C√≥mo contribuir

¬°Las contribuciones son muy bienvenidas! Para colaborar:

1. **Fork** este repositorio
2. **Crea una rama** para tu nueva funcionalidad:
   ```bash
   git checkout -b feature/nueva-funcionalidad
   ```
3. **Realiza tus cambios** y commit√©alos:
   ```bash
   git commit -m 'A√±adir nueva funcionalidad incre√≠ble'
   ```
4. **Sube los cambios** a tu fork:
   ```bash
   git push origin feature/nueva-funcionalidad
   ```
5. **Abre un Pull Request** describiendo tus cambios

### Tipos de contribuciones deseadas:
- üêõ Correcci√≥n de errores
- üìù Mejoras en la documentaci√≥n
- ‚ö° Optimizaciones de rendimiento
- üÜï Nuevas funcionalidades
- üß™ Pruebas adicionales

## üìß Soporte y contacto

¬øTienes preguntas, problemas o sugerencias?

- üêõ **Reportar errores**: Abre un [issue](https://github.com/tomasecastro/Docker-Debian/issues)
- üí° **Sugerir mejoras**: Usa las [discussions](https://github.com/tomasecastro/Docker-Debian/discussions)
- üìß **Contacto directo**: Env√≠a un email o menciona en el issue

---

## üéâ ¬°Instalaci√≥n completada!

**¬°Felicitaciones! Ahora tienes Docker funcionando en Debian 13** üêã

### Pr√≥ximos pasos recomendados:
1. üîÑ **Reinicia tu sesi√≥n** para aplicar los permisos
2. üß™ **Prueba Docker** con `docker run hello-world`
3. üì¶ **Instala Odoo 18** con el comando curl proporcionado
4. üìñ **Explora la documentaci√≥n** para aprender m√°s

**¬°Disfruta desarrollando con Docker! üöÄ**